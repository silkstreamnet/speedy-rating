(function(d){function j(a,d){if(a&&a.length&&d&&1<=d&&5>=d){for(var b=1;b<=d;b++)a.find('.speedy-rating-star[data-rating="'+b+'"]').addClass("speedy-rating-star-on");for(b=5;b>d;b--)a.find('.speedy-rating-star[data-rating="'+b+'"]').removeClass("speedy-rating-star-on")}}function l(a,e){if(a&&a.length&&e){var b=!1;a.find("option").each(function(){if(!1===b){var i=d(this),a=i.attr("value"),c=i.text();a&&a==e?b=i:c&&c==e&&(b=i)}});return b}return!1}var k={},e=[];d.fn.SpeedyRating=function(a){var a=a||{},m=d.extend({},k,a),a=d(this);0<a.length&&a.each(function(){var b=d(this),a=d.extend({},m),f;for(f in k)if(k.hasOwnProperty(f)){var c;c="data-"+f.toLowerCase();c=b.attr(c);(c="undefined"==typeof c?"":c)&&(a[f]=c)}var g;a.elid=e.length;e.push({originobject:b,settings:a,object:!1,setrating:0});g=a.elid;a=!1;f='<div class="speedy-rating" data-elid="'+g+'">';for(c=1;5>=c;c++)if(l(b,c).length)f+='<div class="speedy-rating-star speedy-rating-star-'+c+'" data-rating="'+c+'"></div>';else{a=!0;break}if(!a){b.after(f+"</div>").hide();var h=d('.speedy-rating[data-elid="'+g+'"]');if(h.length){h.find(".speedy-rating-star").on("mouseover",function(){var a=d(this);(a=parseInt(a.attr("data-rating")))&&(5>=a&&1<=a)&&j(h,a)}).on("click",function(){var a=d(this);if(a=parseInt(a.attr("data-rating"))){var c=l(b,a);c&&c.length&&(e[g].setrating=a,b.find("option").attr("selected",!1),c.attr("selected",!0),b.change())}});h.on("mouseout",function(){var a=d(this),b=e[g].setrating;1<=b&&5>=b?j(a,b):a.find(".speedy-rating-star").removeClass("speedy-rating-star-on")});if((a=b.val())&&1<=a&&5>=a)j(h,a),e[g].setrating=a;e[g].object=h}}})};d("select.speedy-rating").SpeedyRating()})(jQuery);
