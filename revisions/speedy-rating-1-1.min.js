(function(d){function j(a,d,c){if(a&&d&&d.length&&c&&1<=c&&5>=c){for(var b=1;b<=c;b++)d.find('.speedy-rating-star[data-rating="'+b+'"]').addClass("speedy-rating-star-on").html(a.html_on);for(b=5;b>c;b--)d.find('.speedy-rating-star[data-rating="'+b+'"]').removeClass("speedy-rating-star-on").html(a.html_off)}}function m(a,f){if(a&&a.length&&f){var c=!1;a.find("option").each(function(){if(!1===c){var b=d(this),n=b.attr("value"),a=b.text();n&&n==f?c=b:a&&a==f&&(c=b)}});return c}return!1}var k={html_on:"",html_off:""},f=[];d.fn.SpeedyRating=function(a){var a=a||{},p=d.extend({},k,a),a=d(this);0<a.length&&a.each(function(){var c=d(this),b=d.extend({},p),a;for(a in k)if(k.hasOwnProperty(a)){var e;e="data-"+a.toLowerCase();e=c.attr(e);(e="undefined"==typeof e?"":e)&&(b[a]=e)}var g;b.elid=f.length;f.push({originobject:c,settings:b,object:!1,setrating:0});g=b.elid;a=!1;e='<div class="speedy-rating" data-elid="'+g+'">';for(var i=1;5>=i;i++)if(m(c,i).length)e+='<div class="speedy-rating-star speedy-rating-star-'+i+'" data-rating="'+i+'">'+b.html_off+"</div>";else{a=!0;break}if(!a){c.after(e+"</div>").hide();var h=d('.speedy-rating[data-elid="'+g+'"]'),l=!1;if(h.length){h.find(".speedy-rating-star").on("mouseenter",function(){if(l!=this){l=this;var a=d(this);(a=parseInt(a.attr("data-rating")))&&(5>=a&&1<=a)&&j(b,h,a)}return!1}).on("click",function(){var a=d(this);if(a=parseInt(a.attr("data-rating"))){var b=m(c,a);b&&b.length&&(f[g].setrating=a,c.find("option").attr("selected",!1),b.attr("selected",!0),c.change())}});h.on("mouseleave",function(){var a=d(this),c=f[g].setrating;1<=c&&5>=c?j(b,a,c):a.find(".speedy-rating-star").removeClass("speedy-rating-star-on").html(b.html_off);l=!1});if((a=c.val())&&1<=a&&5>=a)j(b,h,a),f[g].setrating=a;f[g].object=h}}})};d("select.speedy-rating").SpeedyRating()})(jQuery);